<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Noticias Recientes - El País</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="/css/styles.css">
</head>

<body class="bg-light">

  <div class="container py-5">

    <header class="text-center mb-5" data-aos="fade-down">
      <h1 class="display-4 fw-bold mb-2">
        <i class="fas fa-newspaper text-primary fa-beat-fade"></i>
        Últimas Noticias
      </h1>
      <p class="text-muted">El País | Actualizado hoy</p>
    </header>

    <% const itemsPerPage=9; const totalItems=noticias.length; const totalPages=Math.ceil(totalItems / itemsPerPage); %>

      <% for(let page=1; page <=totalPages; page++) { %>
        <div class="row g-4 mb-4 news-page <%= page === 1 ? 'active' : '' %>" id="page<%= page %>"
          style="display: <%= page === 1 ? 'flex' : 'none' %>;">

          <% const startIndex=(page - 1) * itemsPerPage; const endIndex=Math.min(startIndex + itemsPerPage, totalItems);
            for(let i=startIndex; i < endIndex; i++) { const noticia=noticias[i]; if(!noticia) continue; const delay=((i
            % itemsPerPage) * 100) + 'ms' ; %>
            <div class="col-md-6 col-lg-4">
              <div class="card h-100 shadow card-hover" data-aos="fade-up" data-aos-delay="<%= delay %>">
                <div class="card-body position-relative">

                  <span class="badge bg-primary position-absolute top-0 end-0 rounded-0 px-3 py-1">
                    Actualidad
                  </span>

                  <div
                    class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3"
                    style="width:60px; height:60px;">
                    <i class="fas fa-newspaper text-primary fs-4"></i>
                  </div>

                  <p class="text-muted mb-2"><i class="far fa-calendar-alt me-2"></i>Hoy</p>

                  <h5 class="card-title mb-3">
                    <a href="<%= noticia.link %>" target="_blank" class="text-dark text-decoration-none">
                      <%= noticia.titulo %>
                    </a>
                  </h5>
                  <div class="mt-auto d-flex justify-content-between align-items-center">
                    <a href="<%= noticia.link %>" target="_blank" class="btn btn-read btn-sm">
                      Leer más <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                    <div class="btn-group">
                      <button class="btn btn-outline-secondary btn-sm" title="Compartir">
                        <i class="fas fa-share-alt"></i>
                      </button>
                      <button class="btn btn-outline-secondary btn-sm" title="Guardar">
                        <i class="far fa-bookmark"></i>
                      </button>
                    </div>
                  </div>


                </div>
              </div>
            </div>
            <% } %>
        </div>
        <% } %>

          <div class="d-flex flex-column align-items-center mt-4">
            <div class="btn-toolbar mb-2" role="toolbar">
              <div class="btn-group me-2">
                <button id="prev-page" class="btn btn-outline-primary" <%=totalPages <=1 ? 'disabled' : '' %>>
                  <i class="fas fa-chevron-left"></i>
                </button>
                <% for(let i=1; i <=totalPages; i++) { %>
                  <button class="btn <%= i===1 ? 'btn-primary' : 'btn-outline-primary' %>" data-page="<%= i %>">
                    <%= i %>
                  </button>
                  <% } %>
                    <button id="next-page" class="btn btn-outline-primary" <%=totalPages <=1 ? 'disabled' : '' %>>
                      <i class="fas fa-chevron-right"></i>
                    </button>
              </div>
            </div>
            <p class="text-muted">
              Mostrando <span id="currentPageStart">1</span>-<span id="currentPageEnd">
                <%= Math.min(itemsPerPage, totalItems) %>
              </span>
              de <span id="totalItems">
                <%= totalItems %>
              </span> noticias
            </p>
          </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <script>
    window.APP_CONFIG = {
      totalPages: <%= totalPages %>,
      itemsPerPage: <%= itemsPerPage %>,
        totalItems: <%= totalItems %>
    };
  </script>
  <script src="/js/main.js"></script>
</body>

</html>